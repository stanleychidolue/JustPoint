<!DOCTYPE html>
<html lang="en">
{% load static %} {% load custom_tag %}

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{%block title%}Delivery Completed{%endblock title%}</title>
    <!-- ScrollReveal  -->
    <script src="https://unpkg.com/scrollreveal@4.0.0/dist/scrollreveal.min.js"></script>

    <!-- <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Quicksand:wght@300..700&display=swap"
    rel="stylesheet" /> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" />
    <!-- custom favicon link  -->
    <link rel="icon" href="{%static 'images/base/JustPoint-favicon.ico' %}" />
</head>

<body>
    <section style="margin-top: 5%;">
        <div class="row justify-content-center item-font">
            <div class=" col-lg-8 col-md-10 col-12 ">

                <div class="ms-md-0 ms-2">
                    <div class=" mb-sm-5 mb-4 payment-options-heading d-flex justify-content-cente">
                        <div style="background-color: var(--color-primary); " class="d-inline">
                            <img class="nav-logo" src="{%static 'images/base/JustPoint-logo.svg' %}" alt="Logo" />
                        </div>
                        <span class="ms-1 payment-options-title ">JustPoint Pickup Shops</span>
                    </div>
                    <p>Good day {{request.user.first_name}} {{request.user.last_name}},</p>
                    <p class="mb-0">
                        Please get all items from their respective shops and deliver the complete order to the
                        customer.
                    </p>
                    <!-- <div style="font-size: 12px;">
                        <i class="bi bi-info-circle-fill info-highlight">
                    </div> -->

                    <div class="additional-info ms-3 mt-3">
                        <h6 style="color: var(--color-primary); font-weight: bolder;" class="mb-0">Note:</h6>
                        <ul style="font-size: 12px;">
                            <li></i>
                                Click the <span class="info-highlight">i'm in the store</span> button only when you're
                                in the store
                            </li>
                            <li>
                                Estimated time of delivery is 10mins, so endevour to complete your delivery within the
                                said time.
                            </li>
                            <li>
                                The customer rates your services based on delivery time and manner of approach.
                            </li>
                            <!-- <li>
                                Be sure to click the delivery complete button only after the customer has received the
                                complete order.
                            </li> -->
                        </ul>
                    </div>
                </div>

                <div class="mt-5">
                    <!-- <h3 class="text-center mb-2 shop-vendor-title">Mab Global Estate</h3> -->
                    {% for shop, status in shops.items %}
                    <div class="row mb-3">
                        <div class="col-8">
                            <h5 class="fw-bolder text-center item-font">Racheal's Delight {{shop}}</h5>
                        </div>
                        <div class="col-4">
                            <a href="{% url 'view-shop-items' shop order_id %}">
                                {% if status == "received" %}
                                <button data-status="{{status}}" class="shopButton"
                                    style="background-color: var(--color-green); color: white; border-color:var(--color-green) ;">
                                    Received <i class="bi bi-check-all"></i>
                                </button>
                                {%else%}
                                <button data-status="{{status}}" class="shopButton"
                                    style="background-color: var(--color-primary); color: white; border-color:var(--color-primary) ;">
                                    I'm in the shop
                                </button>
                                {%endif%}
                            </a>
                        </div>
                    </div>
                    {%endfor%}
                </div>

                <div style="padding-top: 20px;" class="d-flex justify-content-center mb-3 ">
                    <a href="{% url 'customer-details' order_id %}" class="disabled"><button
                            style="background-color: var(--color-green);width: aut;" type="submit"
                            class=" login-button pickupCompleteBtn">
                            Pickup Complete
                        </button></a>
                </div>




    </section>
</body>

<script>
    var shopButtons = document.querySelectorAll(".shopButton");
    var status_arr = []
    shopButtons.forEach(btn => {
        status_arr.push(btn.getAttribute("data-status"));
    });
    if (!status_arr.includes("not_received")) {
        let pickupCompleteBtn = document.querySelector(".pickupCompleteBtn");
        pickupCompleteBtn.parentElement.classList.remove('disabled');
    }

</script>

</html